Super üëç Your DB structure is already very good and scalable.

Now I‚Äôll give you **important SQL views + sample data queries** required for a full POS system:

* ‚úÖ Category listing
* ‚úÖ Brand listing
* ‚úÖ Product listing with stock
* ‚úÖ Low stock report
* ‚úÖ Sales invoice view
* ‚úÖ GST summary report
* ‚úÖ HSN-wise GST report
* ‚úÖ Tax Input Credit (ITC) ready structure

---

# üîπ 1Ô∏è‚É£ Category List View

```sql
CREATE VIEW view_categories AS
SELECT 
    id,
    name,
    created_at
FROM categories;
```

Use:

```sql
SELECT * FROM view_categories;
```

---

# üîπ 2Ô∏è‚É£ Brand List View

```sql
CREATE VIEW view_brands AS
SELECT 
    id,
    name,
    created_at
FROM brands;
```

---

# üîπ 3Ô∏è‚É£ Product List with Category, Brand, GST, Stock

This is your **main POS product screen query**.

```sql
CREATE VIEW view_products_full AS
SELECT 
    p.id,
    p.name,
    p.barcode,
    p.hsn_code,
    c.name AS category,
    b.name AS brand,
    t.name AS tax_name,
    t.percentage AS gst_percent,
    p.cost_price,
    p.retail_price,
    p.wholesale_price,
    p.is_tax_inclusive,
    ps.current_stock,
    ps.minimum_stock,
    p.is_active
FROM products p
LEFT JOIN categories c ON p.category_id = c.id
LEFT JOIN brands b ON p.brand_id = b.id
LEFT JOIN tax_slabs t ON p.tax_slab_id = t.id
LEFT JOIN product_stocks ps ON p.id = ps.product_id;
```

Use:

```sql
SELECT * FROM view_products_full;
```

---

# üîπ 4Ô∏è‚É£ Low Stock Report

```sql
CREATE VIEW view_low_stock AS
SELECT 
    p.id,
    p.name,
    ps.current_stock,
    ps.minimum_stock
FROM products p
JOIN product_stocks ps ON p.id = ps.product_id
WHERE ps.current_stock <= ps.minimum_stock;
```

---

# üîπ 5Ô∏è‚É£ Sales Invoice View (Full Bill Data)

```sql
CREATE VIEW view_sales_invoice AS
SELECT 
    s.id AS sale_id,
    s.invoice_no,
    s.customer_name,
    s.customer_gstin,
    s.sub_total,
    s.cgst_total,
    s.sgst_total,
    s.igst_total,
    s.discount_total,
    s.grand_total,
    s.payment_mode,
    s.created_at
FROM sales s;
```

---

# üîπ 6Ô∏è‚É£ Sales Items Detailed View (Invoice Items)

```sql
CREATE VIEW view_sale_items_detailed AS
SELECT 
    si.sale_id,
    p.name AS product_name,
    p.hsn_code,
    si.quantity,
    si.unit_price,
    si.tax_percent,
    si.cgst,
    si.sgst,
    si.igst,
    si.total
FROM sale_items si
JOIN products p ON si.product_id = p.id;
```

---

# üîπ 7Ô∏è‚É£ Daily Sales Report

```sql
CREATE VIEW view_daily_sales AS
SELECT 
    DATE(created_at) AS sale_date,
    COUNT(id) AS total_bills,
    SUM(grand_total) AS total_sales,
    SUM(cgst_total) AS total_cgst,
    SUM(sgst_total) AS total_sgst,
    SUM(igst_total) AS total_igst
FROM sales
GROUP BY DATE(created_at);
```

---

# üîπ 8Ô∏è‚É£ GST Summary Report (Important for GSTR-1)

```sql
CREATE VIEW view_gst_summary AS
SELECT 
    t.percentage AS gst_percent,
    SUM(si.total) AS taxable_value,
    SUM(si.cgst) AS total_cgst,
    SUM(si.sgst) AS total_sgst,
    SUM(si.igst) AS total_igst
FROM sale_items si
JOIN products p ON si.product_id = p.id
JOIN tax_slabs t ON p.tax_slab_id = t.id
GROUP BY t.percentage;
```

---

# üîπ 9Ô∏è‚É£ HSN Wise GST Report

```sql
CREATE VIEW view_hsn_report AS
SELECT 
    p.hsn_code,
    t.percentage AS gst_percent,
    SUM(si.quantity) AS total_qty,
    SUM(si.total) AS taxable_value,
    SUM(si.cgst) AS total_cgst,
    SUM(si.sgst) AS total_sgst,
    SUM(si.igst) AS total_igst
FROM sale_items si
JOIN products p ON si.product_id = p.id
JOIN tax_slabs t ON p.tax_slab_id = t.id
GROUP BY p.hsn_code, t.percentage;
```

---

# üîπ üîü Tax Input Credit (ITC) Structure (Purchase Side Required)

‚ö† Currently your DB does NOT have purchase tables.

To calculate ITC properly, you must add:

```sql
purchases
purchase_items
```

Example minimal structure:

```sql
CREATE TABLE purchases (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    supplier_name VARCHAR(200),
    supplier_gstin VARCHAR(20),
    total_taxable DECIMAL(12,2),
    cgst_total DECIMAL(12,2),
    sgst_total DECIMAL(12,2),
    igst_total DECIMAL(12,2),
    grand_total DECIMAL(12,2),
    created_at TIMESTAMP NULL
);
```

```sql
CREATE TABLE purchase_items (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    purchase_id BIGINT,
    product_id BIGINT,
    quantity DECIMAL(12,2),
    unit_price DECIMAL(12,2),
    tax_percent DECIMAL(5,2),
    cgst DECIMAL(12,2),
    sgst DECIMAL(12,2),
    igst DECIMAL(12,2),
    total DECIMAL(12,2),
    FOREIGN KEY (purchase_id) REFERENCES purchases(id) ON DELETE CASCADE
);
```

---

### üßæ ITC Report View

```sql
CREATE VIEW view_itc_summary AS
SELECT 
    SUM(cgst_total) AS total_input_cgst,
    SUM(sgst_total) AS total_input_sgst,
    SUM(igst_total) AS total_input_igst
FROM purchases;
```

---

# üî• Final POS Reports Checklist

Your POS can now support:

‚úÖ Category screen
‚úÖ Brand screen
‚úÖ Product screen
‚úÖ Stock report
‚úÖ Low stock alert
‚úÖ Sales invoice
‚úÖ Daily sales
‚úÖ GST summary
‚úÖ HSN report
‚úÖ ITC report
‚úÖ Profit calculation (if needed I can give)

---

If you want next level:

* üìä Profit & Loss View
* üìà Monthly GST return format (GSTR-1 style)
* üßæ B2B / B2C separation
* üè¨ Multi-branch POS
* üì¶ Batch & expiry support
* üñ•Ô∏è Filament dashboard widgets queries

Tell me what level you want next üòé
